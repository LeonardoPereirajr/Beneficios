{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/leojr/Workspace8/Beneficios/template/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/leojr/Workspace8/Beneficios/template/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/leojr/Workspace8/Beneficios/template/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import GLOBAL from'./storage.json';import findSring from'../Functions/findString';import postValeTransporte from'../Services/postValeTransporte';import{setMessage}from'../globalState';export function saveData(data){var invalidForm=false;var saveStop=function saveStop(){// throw new Error('Formulario Invalido')\nconsole.log(GLOBAL.tarefa_1);};function tarefa_1(){var taskData=GLOBAL.tarefa_1;console.log(taskData);// throw new Error()\nvar retorno={motivoSelecionado:taskData.motivoSelecionado.label,operacaoSelecionada:taskData.operacaoSelecionada.label,beneficioSelecionado:taskData.beneficioSelecionado.label,transporteSelecionado:taskData.transporteSelecionado.label,codlin:taskData.codlin,tipo:taskData.tipo,valor:taskData.valor,qtdida:taskData.qtdida,qtdvolta:taskData.qtdvolta,datainivale:taskData.datainivale,fimperiodo:taskData.fimperiodo,esc:taskData.esc,datafimvale:taskData.datafimvale,linha:taskData.linha,cartao:taskData.cartao,escvtr:taskData.escvtr,inievt:taskData.inievt,nomevt:taskData.nomevt,datainiescala:taskData.datainiescala,tarefa1_JSON:JSON.stringify(taskData)};return{formData:_objectSpread({},retorno)};}saveStop();function tarefa_2(){return _tarefa_.apply(this,arguments);}function _tarefa_(){_tarefa_=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var taskData,decisaoUsuario,proximaTarefa,erroIntegracao,integracao,beneficios,_yield$postValeTransp,_retorno,retorno;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:taskData=GLOBAL.tarefa_2;decisaoUsuario=data.nextAction.name;proximaTarefa=data.nextAction;erroIntegracao=0;console.log(GLOBAL);if(!(findSring(decisaoUsuario,'Ajustar')||findSring(decisaoUsuario,'Reprovar'))){_context.next=9;break;}return _context.abrupt(\"return\",{formData:{decisao:decisaoUsuario}});case 9:return _context.abrupt(\"return\",{formData:{decisao:decisaoUsuario}});case 10:if(invalidForm){_context.next=31;break;}if(!findSring(proximaTarefa.name,'Aprova')){_context.next=26;break;}beneficios=[{motivoSelecionado:GLOBAL.state.variaveisProcesso.empresaSolicitante,operacaoSelecionada:GLOBAL.state.variaveisProcesso.operacaoSelecionada.label,beneficioSelecionado:GLOBAL.state.variaveisProcesso.beneficioSelecionado.label,transporteSelecionado:GLOBAL.state.variaveisProcesso.transporteSelecionado.label,codlin:GLOBAL.state.variaveisProcesso.codlin,tipo:GLOBAL.state.variaveisProcesso.tipo,valor:GLOBAL.state.variaveisProcesso.valor,qtdida:GLOBAL.state.variaveisProcesso.qtdida,qtdvolta:GLOBAL.state.variaveisProcesso.qtdvolta,novoperiodo:GLOBAL.state.variaveisProcesso.novoperiodo,fimperiodo:GLOBAL.state.variaveisProcesso.fimperiodo,esc:GLOBAL.state.variaveisProcesso.esc,datafimvale:GLOBAL.state.variaveisProcesso.datafimvale,linha:GLOBAL.state.variaveisProcesso.linha,cartao:GLOBAL.state.variaveisProcesso.cartao,escvtr:GLOBAL.state.variaveisProcesso.escvtr,inievt:GLOBAL.state.variaveisProcesso.inievt,nomevt:GLOBAL.state.variaveisProcesso.nomevt}];_context.next=15;return postValeTransporte(beneficios);case 15:_yield$postValeTransp=_context.sent;_retorno=_yield$postValeTransp.retorno;if(!(_retorno!='Sucesso')){_context.next=25;break;}erroIntegracao=1;console.log(\"Retorno != Sucesso\");setMessage({severity:'error',detail:_retorno,sticky:true,life:10000});integracao='Erro na integração';throw new Error('Erro na integração.');case 25:if(_retorno=='Sucesso'){console.log(\"retorno = Sucesso\");// eslint-disable-next-line no-unused-vars\nintegracao='Integrado com sucesso';// eslint-disable-next-line no-unused-vars\nerroIntegracao=0;setMessage({severity:'success',summary:'Gravado com Sucesso!',detail:'Beneficio gravado com sucesso!',sticky:true});}case 26:retorno={codlin:taskData.codlin,tipo:taskData.tipo,valor:taskData.valor,qtdida:taskData.qtdida,qtdvolta:taskData.qtdvolta,novoperiodo:taskData.datainivale,fimperiodo:taskData.fimperiodo,esc:taskData.esc,datafimvale:taskData.datafimvale,linha:taskData.linha,cartao:taskData.cartao,motivoSelecionado:taskData.motivoSelecionado.label,operacaoSelecionada:taskData.operacaoSelecionada.label,beneficioSelecionado:taskData.beneficioSelecionado.label,transporteSelecionado:taskData.transporteSelecionado.label,escvtr:taskData.escvtr,inievt:taskData.inievt,nomevt:taskData.nomevt};console.log(\"FormData Retorno\",retorno);return _context.abrupt(\"return\",{formData:_objectSpread({},retorno)});case 31:saveStop();case 32:case\"end\":return _context.stop();}}},_callee);}));return _tarefa_.apply(this,arguments);}return{tarefa_1:tarefa_1,tarefa_2:tarefa_2};}","map":{"version":3,"names":["GLOBAL","findSring","postValeTransporte","setMessage","saveData","data","invalidForm","saveStop","console","log","tarefa_1","taskData","retorno","motivoSelecionado","label","operacaoSelecionada","beneficioSelecionado","transporteSelecionado","codlin","tipo","valor","qtdida","qtdvolta","datainivale","fimperiodo","esc","datafimvale","linha","cartao","escvtr","inievt","nomevt","datainiescala","tarefa1_JSON","JSON","stringify","formData","tarefa_2","decisaoUsuario","nextAction","name","proximaTarefa","erroIntegracao","decisao","beneficios","state","variaveisProcesso","empresaSolicitante","novoperiodo","severity","detail","sticky","life","integracao","Error","summary"],"sources":["C:/Users/leojr/Workspace8/Beneficios/template/src/integration/saveDate.js"],"sourcesContent":["import GLOBAL from './storage.json'\r\nimport findSring from '../Functions/findString';\r\nimport postValeTransporte from '../Services/postValeTransporte'\r\nimport { setMessage } from '../globalState';\r\n\r\nexport function saveData(data) {\r\n    let invalidForm = false;\r\n\r\n\r\n    const saveStop = () => {\r\n        // throw new Error('Formulario Invalido')\r\n        console.log(GLOBAL.tarefa_1)\r\n    }\r\n\r\n\r\n    function tarefa_1() {\r\n        const taskData = GLOBAL.tarefa_1;\r\n        console.log(taskData)\r\n        // throw new Error()\r\n        let retorno = {\r\n            motivoSelecionado: taskData.motivoSelecionado.label,\r\n            operacaoSelecionada: taskData.operacaoSelecionada.label,\r\n            beneficioSelecionado: taskData.beneficioSelecionado.label,\r\n            transporteSelecionado: taskData.transporteSelecionado.label,\r\n            codlin: taskData.codlin,\r\n            tipo: taskData.tipo,\r\n            valor: taskData.valor,\r\n            qtdida: taskData.qtdida,\r\n            qtdvolta: taskData.qtdvolta,\r\n            datainivale: taskData.datainivale,\r\n            fimperiodo: taskData.fimperiodo,\r\n            esc: taskData.esc,\r\n            datafimvale: taskData.datafimvale,\r\n            linha: taskData.linha,\r\n            cartao: taskData.cartao,\r\n            escvtr: taskData.escvtr,\r\n            inievt: taskData.inievt,\r\n            nomevt: taskData.nomevt,\r\n            datainiescala: taskData.datainiescala,\r\n            tarefa1_JSON: JSON.stringify(taskData)\r\n        }\r\n        return {\r\n            formData: { ...retorno }\r\n        }\r\n    }\r\n    saveStop()\r\n\r\n\r\n    async function  tarefa_2() {\r\n        const taskData = GLOBAL.tarefa_2;\r\n        const decisaoUsuario = data.nextAction.name;\r\n        const proximaTarefa = data.nextAction;\r\n        let erroIntegracao = 0;\r\n        let integracao;\r\n        console.log(GLOBAL)\r\n        if (findSring(decisaoUsuario, 'Ajustar') || findSring(decisaoUsuario, 'Reprovar')) {\r\n            return {\r\n                formData: {\r\n                    decisao: decisaoUsuario\r\n                }\r\n            }\r\n        } else {\r\n            return {\r\n                formData: { decisao: decisaoUsuario }\r\n            }\r\n        }\r\n        // eslint-disable-next-line no-unreachable\r\n        if (!invalidForm) {\r\n            if (findSring(proximaTarefa.name, 'Aprova')) {\r\n                let beneficios = [{\r\n                        motivoSelecionado: GLOBAL.state.variaveisProcesso.empresaSolicitante,\r\n                        operacaoSelecionada: GLOBAL.state.variaveisProcesso.operacaoSelecionada.label,\r\n                        beneficioSelecionado: GLOBAL.state.variaveisProcesso.beneficioSelecionado.label,\r\n                        transporteSelecionado: GLOBAL.state.variaveisProcesso.transporteSelecionado.label,\r\n                        codlin: GLOBAL.state.variaveisProcesso.codlin,\r\n                        tipo: GLOBAL.state.variaveisProcesso.tipo,\r\n                        valor: GLOBAL.state.variaveisProcesso.valor,\r\n                        qtdida: GLOBAL.state.variaveisProcesso.qtdida,\r\n                        qtdvolta: GLOBAL.state.variaveisProcesso.qtdvolta,\r\n                        novoperiodo: GLOBAL.state.variaveisProcesso.novoperiodo,\r\n                        fimperiodo: GLOBAL.state.variaveisProcesso.fimperiodo,\r\n                        esc: GLOBAL.state.variaveisProcesso.esc,\r\n                        datafimvale: GLOBAL.state.variaveisProcesso.datafimvale,\r\n                        linha: GLOBAL.state.variaveisProcesso.linha,\r\n                        cartao: GLOBAL.state.variaveisProcesso.cartao,\r\n                        escvtr: GLOBAL.state.variaveisProcesso.escvtr,\r\n                        inievt: GLOBAL.state.variaveisProcesso.inievt,\r\n                        nomevt: GLOBAL.state.variaveisProcesso.nomevt,\r\n                    }];\r\n                    let { retorno } = await postValeTransporte(beneficios);\r\n                if (retorno != 'Sucesso') {\r\n                    erroIntegracao = 1;\r\n                    console.log(\"Retorno != Sucesso\")\r\n                    setMessage({ severity: 'error', detail: retorno, sticky: true, life: 10000 });\r\n                    integracao = 'Erro na integração'\r\n                    throw new Error('Erro na integração.');\r\n                } else if (retorno == 'Sucesso') {\r\n                    console.log(\"retorno = Sucesso\")\r\n                    // eslint-disable-next-line no-unused-vars\r\n                    integracao = 'Integrado com sucesso'\r\n                    // eslint-disable-next-line no-unused-vars\r\n                    erroIntegracao = 0;\r\n                    setMessage({ severity: 'success', \r\n                    summary: 'Gravado com Sucesso!', detail: 'Beneficio gravado com sucesso!', sticky: true })\r\n                }\r\n            }\r\n            let retorno = {\r\n            codlin: taskData.codlin,\r\n            tipo: taskData.tipo,\r\n            valor: taskData.valor,\r\n            qtdida: taskData.qtdida,\r\n            qtdvolta: taskData.qtdvolta,\r\n            novoperiodo: taskData.datainivale,\r\n            fimperiodo: taskData.fimperiodo,\r\n            esc: taskData.esc,\r\n            datafimvale: taskData.datafimvale,\r\n            linha: taskData.linha,\r\n            cartao: taskData.cartao,\r\n            motivoSelecionado: taskData.motivoSelecionado.label,\r\n            operacaoSelecionada: taskData.operacaoSelecionada.label,\r\n            beneficioSelecionado: taskData.beneficioSelecionado.label,\r\n            transporteSelecionado: taskData.transporteSelecionado.label,\r\n            escvtr: taskData.escvtr,\r\n            inievt: taskData.inievt,\r\n            nomevt: taskData.nomevt\r\n            }\r\n            console.log(\"FormData Retorno\", retorno)\r\n            return {\r\n                formData: { ...retorno }\r\n            }\r\n        } else {\r\n            saveStop()\r\n        }\r\n    }\r\n    return { tarefa_1, tarefa_2 }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}